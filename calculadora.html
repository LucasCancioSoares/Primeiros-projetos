<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Calculadora de Aposentadoria Antecipada</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<style>
		body {
			background: #181a1b;
			color: #f5f6fa;
			font-family: 'Inter', sans-serif;
			margin: 0;
			min-height: 100vh;
		}
		.container {
			max-width: 420px;
			margin: 40px auto;
			background: #232526;
			border-radius: 12px;
			box-shadow: 0 2px 16px #0003;
			padding: 32px 24px;
		}
		h1 {
			font-size: 1.5rem;
			margin-bottom: 24px;
			text-align: center;
			font-weight: 700;
		}
		label {
			display: block;
			margin-bottom: 8px;
			font-weight: 700;
		}
		input {
			width: 100%;
			padding: 8px;
			margin-bottom: 18px;
			border: none;
			border-radius: 6px;
			background: #2c2f31;
			color: #f5f6fa;
			font-size: 1rem;
		}
		input:focus {
			outline: 2px solid #4ecca3;
		}
		button {
			width: 100%;
			padding: 12px;
			background: #4ecca3;
			color: #181a1b;
			border: none;
			border-radius: 6px;
			font-size: 1rem;
			font-weight: 700;
			cursor: pointer;
			margin-bottom: 18px;
			transition: background 0.2s;
		}
		button:hover {
			background: #3bb08f;
		}
		.result {
			text-align: center;
			margin-bottom: 24px;
			font-size: 1.1rem;
		}
		.chart-area {
			background: #232526;
			border-radius: 12px;
			padding: 16px;
		}
		.compare {
			margin-top: 24px;
			text-align: center;
		}
		.compare input {
			width: 80px;
			display: inline-block;
			margin: 0 8px;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>Calculadora de Aposentadoria</h1>
		<form id="simForm">
			<label for="aporte">Aporte mensal (R$)</label>
			<input type="number" id="aporte" min="0" required>
			<label for="taxa">Taxa de juros anual (%)</label>
			<input type="number" id="taxa" min="0" max="100" step="0.01" required>
			<label for="tempo">Tempo (anos)</label>
			<input type="number" id="tempo" min="1" max="80" required>
			<button type="submit">Simular</button>
		</form>
		<div class="result" id="result"></div>
		<div class="chart-area">
			<canvas id="patrimonioChart" height="220"></canvas>
		</div>
		<div class="compare">
			<span>Comparar cenários:</span><br>
			<input type="number" id="aporte2" placeholder="Aporte 2">
			<input type="number" id="taxa2" placeholder="Taxa 2 (%)">
			<input type="number" id="tempo2" placeholder="Tempo 2 (anos)">
			<button id="compareBtn">Comparar</button>
		</div>
		<div class="scenarios">
			<span>Simular estratégias:</span><br>
			<button id="conservadorBtn">Conservador</button>
			<button id="moderadoBtn">Moderado</button>
			<button id="agressivoBtn">Agressivo</button>
		</div>
		<div class="evolucao">
			<span>Evolução mês a mês:</span>
			<table id="tabelaEvolucao" style="width:100%;margin-top:12px;background:#2c2f31;border-radius:8px;color:#f5f6fa;font-size:0.95rem;">
				<thead>
					<tr><th>Mês</th><th>Patrimônio (R$)</th></tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>
	<script>
	// Modular: funções de simulação
	function simularInvestimento(aporte, taxaAnual, tempoAnos) {
		let patrimonio = 0;
		let historico = [];
		let taxaMensal = Math.pow(1 + taxaAnual / 100, 1/12) - 1;
		let meses = tempoAnos * 12;
		for (let m = 1; m <= meses; m++) {
			patrimonio += aporte;
			patrimonio *= (1 + taxaMensal);
			historico.push({ mes: m, patrimonio });
		}
		return { patrimonioFinal: patrimonio, historico };
	}

	function simularComparacao(aporte1, taxa1, tempo1, aporte2, taxa2, tempo2) {
		const sim1 = simularInvestimento(aporte1, taxa1, tempo1);
		const sim2 = simularInvestimento(aporte2, taxa2, tempo2);
		return {
			patrimonioFinal1: sim1.patrimonioFinal,
			historico1: sim1.historico,
			patrimonioFinal2: sim2.patrimonioFinal,
			historico2: sim2.historico,
			diferenca: sim2.patrimonioFinal - sim1.patrimonioFinal
		};
	}

	function renderChart(historico1, historico2 = null) {
		const labels = historico1.map(h => h.mes);
		const data1 = historico1.map(h => h.patrimonio);
		let datasets = [
			{
				label: 'Cenário 1',
				data: data1,
				borderColor: '#4ecca3',
				backgroundColor: 'rgba(78,204,163,0.1)',
				tension: 0.2,
			}
		];
		if (historico2) {
			datasets.push({
				label: 'Cenário 2',
				data: historico2.map(h => h.patrimonio),
				borderColor: '#f5f6fa',
				backgroundColor: 'rgba(245,246,250,0.1)',
				tension: 0.2,
			});
		}
		if (window.chart) window.chart.destroy();
		window.chart = new Chart(document.getElementById('patrimonioChart').getContext('2d'), {
			type: 'line',
			data: { labels, datasets },
			options: {
				plugins: {
					legend: {
						labels: {
							color: '#f5f6fa',
							font: { weight: 'bold' }
						}
					}
				},
				scales: {
					x: {
						ticks: { color: '#f5f6fa' },
						grid: { color: '#232526' },
						title: { display: true, text: 'Meses', color: '#f5f6fa' }
					},
					y: {
						ticks: { color: '#f5f6fa' },
						grid: { color: '#232526' },
						title: { display: true, text: 'Patrimônio (R$)', color: '#f5f6fa' }
					}
				}
			}
		});
	}

	function renderEvolucao(historico) {
		const tabela = document.getElementById('tabelaEvolucao').querySelector('tbody');
		tabela.innerHTML = '';
		historico.forEach(h => {
			const tr = document.createElement('tr');
			tr.innerHTML = `<td>${h.mes}</td><td>R$ ${h.patrimonio.toLocaleString('pt-BR', {maximumFractionDigits:2})}</td>`;
			tabela.appendChild(tr);
		});
	}

	// Estratégias pré-definidas
	const estrategias = {
		conservador: { taxa: 6, descricao: 'Renda fixa, baixo risco' },
		moderado: { taxa: 9, descricao: 'Diversificado, risco moderado' },
		agressivo: { taxa: 14, descricao: 'Ações, alto risco' }
	};

	// Manipulação de DOM
	const form = document.getElementById('simForm');
	const resultDiv = document.getElementById('result');
	const compareBtn = document.getElementById('compareBtn');
	const conservadorBtn = document.getElementById('conservadorBtn');
	const moderadoBtn = document.getElementById('moderadoBtn');
	const agressivoBtn = document.getElementById('agressivoBtn');

	form.addEventListener('submit', function(e) {
		e.preventDefault();
		const aporte = parseFloat(document.getElementById('aporte').value);
		const taxa = parseFloat(document.getElementById('taxa').value);
		const tempo = parseInt(document.getElementById('tempo').value);
		const resultado = simularInvestimento(aporte, taxa, tempo);
		resultDiv.innerHTML = `Patrimônio final: <b>R$ ${resultado.patrimonioFinal.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b>`;
		renderChart(resultado.historico);
		renderEvolucao(resultado.historico);
	});

	compareBtn.addEventListener('click', function() {
		const aporte1 = parseFloat(document.getElementById('aporte').value);
		const taxa1 = parseFloat(document.getElementById('taxa').value);
		const tempo1 = parseInt(document.getElementById('tempo').value);
		const aporte2 = parseFloat(document.getElementById('aporte2').value);
		const taxa2 = parseFloat(document.getElementById('taxa2').value);
		const tempo2 = parseInt(document.getElementById('tempo2').value);
		if (isNaN(aporte2) || isNaN(taxa2) || isNaN(tempo2)) {
			alert('Preencha todos os campos do cenário 2.');
			return;
		}
		const resultado = simularComparacao(aporte1, taxa1, tempo1, aporte2, taxa2, tempo2);
		resultDiv.innerHTML = `Cenário 1: <b>R$ ${resultado.patrimonioFinal1.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b><br>Cenário 2: <b>R$ ${resultado.patrimonioFinal2.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b><br>Diferença: <b>R$ ${resultado.diferenca.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b>`;
		renderChart(resultado.historico1, resultado.historico2);
		renderEvolucao(resultado.historico1);
	});

	conservadorBtn.addEventListener('click', function() {
		const aporte = parseFloat(document.getElementById('aporte').value);
		const tempo = parseInt(document.getElementById('tempo').value);
		const taxa = estrategias.conservador.taxa;
		const resultado = simularInvestimento(aporte, taxa, tempo);
		resultDiv.innerHTML = `Estratégia Conservadora (${estrategias.conservador.descricao}):<br>Patrimônio final: <b>R$ ${resultado.patrimonioFinal.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b>`;
		renderChart(resultado.historico);
		renderEvolucao(resultado.historico);
	});

	moderadoBtn.addEventListener('click', function() {
		const aporte = parseFloat(document.getElementById('aporte').value);
		const tempo = parseInt(document.getElementById('tempo').value);
		const taxa = estrategias.moderado.taxa;
		const resultado = simularInvestimento(aporte, taxa, tempo);
		resultDiv.innerHTML = `Estratégia Moderada (${estrategias.moderado.descricao}):<br>Patrimônio final: <b>R$ ${resultado.patrimonioFinal.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b>`;
		renderChart(resultado.historico);
		renderEvolucao(resultado.historico);
	});

	agressivoBtn.addEventListener('click', function() {
		const aporte = parseFloat(document.getElementById('aporte').value);
		const tempo = parseInt(document.getElementById('tempo').value);
		const taxa = estrategias.agressivo.taxa;
		const resultado = simularInvestimento(aporte, taxa, tempo);
		resultDiv.innerHTML = `Estratégia Agressiva (${estrategias.agressivo.descricao}):<br>Patrimônio final: <b>R$ ${resultado.patrimonioFinal.toLocaleString('pt-BR', {maximumFractionDigits:2})}</b>`;
		renderChart(resultado.historico);
		renderEvolucao(resultado.historico);
	});
	</script>
</body>
</html>
